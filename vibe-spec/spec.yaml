# GLTF-VRM-Merger 프로젝트 사양서
# 작성일: 2025-05-21

project:
  name: "GLTF-VRM-Merger"
  description: "VRM과 GLTF 모델을 로드하고 노드를 병합/복사/삭제할 수 있는 웹 기반 3D 모델 에디터"
  version: "2.1.0"
  technology_stack:
    - "Next.js 15.2.4"
    - "React 19"  
    - "Three.js (네이티브 API 활용)"
    - "@pixiv/three-vrm"
    - "Tailwind CSS"
    - "shadcn/ui"
    - "TypeScript"

file_structure:
  app:
    - "layout.tsx: Next.js 최상위 레이아웃"
    - "page.tsx: 메인 페이지 컴포넌트, 상태 관리 및 UI 조합"
    - "globals.css: 전역 스타일"
    
  components:
    - "model-drop-zone.tsx: 파일 드롭 구역"
    - "model-viewer.tsx: Three.js 3D 뷰어"
    - "model-tree.tsx: 기본 구조 트리 컴포넌트"
    - "enhanced-model-tree.tsx: Three.js 기반 개선된 트리 컴포넌트"
    - "scene-graph-tree.tsx: Scene Graph 전용 트리 컴포넌트"
    - "model-download-button.tsx: GLB 내보내기"
    - "theme-provider.tsx: 테마 관리"
    - "ui/: shadcn/ui 컴포넌트 모음"
    
  lib:
    - "model-utils.ts: 기본 모델 조작 유틸리티"
    - "three-scene-utils.ts: Three.js 네이티브 API 기반 유틸리티"
    - "model-exporter.ts: GLB 형식 내보내기 관련 유틸리티"
    - "gltf-document-manager.ts: glTF-Transform 기반 고급 모델 관리 클래스"
    - "history-manager.ts: 실행 취소/다시 실행 관리"
    
  hooks:
    - "커스텀 React 훅 (필요시 추가)"
    
  vibe-spec:
    - "spec.yaml: 프로젝트 사양서"

recent_changes:
  - 버전: "2.1.0"
    날짜: "2025-05-22"
    변경내용:
      - "glTF-Transform 라이브러리 도입 준비 (현재 비활성화)"
      - "GLTFDocumentManager 클래스 기본 구조 구현"
      - "향후 고급 모델 편집 기능을 위한 기반 코드 마련"
      - "현재는 기존 Three.js 기반 시스템 유지"
  - 버전: "2.0.2"
    날짜: "2025-05-22"
    변경내용:
      - "VRM 파일 내보내기 기능 추가"
      - "Scene Graph 기반 모델을 원본 형식(GLB/VRM)에 맞게 다운로드 가능"
      - "VRM 메타데이터 보존 지원"

known_issues:
  - "복잡한 스켈레톤 구조가 있는 모델에서 일부 본 참조가 누락될 수 있음"
  - "일부 VRM 확장 속성이 내보내기 시 보존되지 않을 수 있음"
